
<!DOCTYPE html>

<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Atributy v SQL &#8212; Školení Úvod do prostorových databází</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gismentors.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="index" title="Rejstřík" href="../genindex.html" />
    <link rel="search" title="Vyhledávání" href="../search.html" />
    <link rel="next" title="Vazby v SQL" href="join.html" />
    <link rel="prev" title="Úvod do SQL" href="uvod.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="../index.html">Školení Úvod do prostorových databází</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="uvod.html" title="Úvod do SQL"
             accesskey="P">předchozí</a> |
          <a href="join.html" title="Vazby v SQL"
             accesskey="N">další</a> |
          <a href="../genindex.html" title="Obecný rejstřík"
             accesskey="I">rejstřík</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="atributy-v-sql">
<span id="index-0"></span><h1>Atributy v SQL<a class="headerlink" href="#atributy-v-sql" title="Permalink to this heading">¶</a></h1>
<p>V úvodu jsme si ukázali, že můžeme požádat o atributy z tabulky.
Atributy však můžeme využít také k dotazování.</p>
<section id="podminka">
<h2>Podmínka<a class="headerlink" href="#podminka" title="Permalink to this heading">¶</a></h2>
<p>V jazyce SQL je možné tvořit podmínky. Slouží k tomu celá řada klíčových
slov a operátorů, ale základní je slovo <span class="sqlcmd">WHERE</span> a matematické operátory
jako je např. <span class="sqlcmd">=</span>.</p>
<p>Pokud tedy chceme vybrat např. parcely, typu Vodní tok, který má kód 7, tak podmínku zapíšeme takto</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">DruhPozemkuKod</span><span class="p">,</span><span class="w"> </span><span class="n">VymeraParcely</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">parcely</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">DruhPozemkuKod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="id1">
<img alt="../_images/sql2.png" class="large" src="../_images/sql2.png" />
<figcaption>
<p><span class="caption-number">Obr. 16 </span><span class="caption-text">Dotaz na parcely typu Vodní tok z RÚIAN v QGIS</span><a class="headerlink" href="#id1" title="Permalink k tomuto obrázku">¶</a></p>
</figcaption>
</figure>
<p>Pokud chceme např. vybrat parcely, které mají rozlohu větší než 10 ha, napíšeme</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">DruhPozemkuKod</span><span class="p">,</span><span class="w"> </span><span class="n">VymeraParcely</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">parcely</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">VymeraParcely</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100000</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="id2">
<img alt="../_images/sql3.png" class="large" src="../_images/sql3.png" />
<figcaption>
<p><span class="caption-number">Obr. 17 </span><span class="caption-text">Dotaz na parcely větší než 10 ha z RÚIAN v QGIS</span><a class="headerlink" href="#id2" title="Permalink k tomuto obrázku">¶</a></p>
</figcaption>
</figure>
<p>Specifickým způsobem se ohraničují hodnoty atributů typu text (řetězec) a datum.
Tyto hodnoty se uvozují jednoduchými uvozovkami.</p>
<p>Pokud tedy chceme získat záznamy, které platí od roku 2021, tedy v roce 2021 došlo na
parcele ke změně nebo nově vznikla, ptáme se takto.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">PlatiOd</span><span class="p">,</span><span class="w"> </span><span class="n">DruhPozemkuKod</span><span class="p">,</span><span class="w"> </span><span class="n">VymeraParcely</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">parcely</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">PlatiOd</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="s1">&#39;2020-12-31&#39;</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="id3">
<img alt="../_images/sql4.png" class="large" src="../_images/sql4.png" />
<figcaption>
<p><span class="caption-number">Obr. 18 </span><span class="caption-text">Dotaz na parcely se záznamem v roce 2021 z RÚIAN v QGIS</span><a class="headerlink" href="#id3" title="Permalink k tomuto obrázku">¶</a></p>
</figcaption>
</figure>
</section>
<section id="dalsi-uzitecna-klicova-slova-a-vyrazy">
<h2>Další užitečná klíčová slova a výrazy<a class="headerlink" href="#dalsi-uzitecna-klicova-slova-a-vyrazy" title="Permalink to this heading">¶</a></h2>
<p>Mezi často používaná klíčová slova patří <span class="sqlcmd">ORDER BY</span>,
<span class="sqlcmd">AND</span>, <span class="sqlcmd">OR</span>, <span class="sqlcmd">NOT</span> a <span class="sqlcmd">()</span>.</p>
<p>Pomocí <span class="sqlcmd">ORDER BY</span> můžeme záznamy řadit dle vybraného atributu,
atributů nebo výrazu.</p>
<p>Pomocí operátorů <span class="sqlcmd">AND</span>, <span class="sqlcmd">OR</span>, <span class="sqlcmd">NOT</span> a <span class="sqlcmd">()</span>
můžeme sestavovat logické kombinace podmínek.</p>
<p>Pokud nás tedy třeba zajímají parcely, které mají změnu v roce 2021 a jsou
to Vodní toky, můžeme je vybrat takto a seřadit podle výměry.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">PlatiOd</span><span class="p">,</span><span class="w"> </span><span class="n">DruhPozemkuKod</span><span class="p">,</span><span class="w"> </span><span class="n">VymeraParcely</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">parcely</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">PlatiOd</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="s1">&#39;2020-12-31&#39;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">DruhPozemkuKod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">VymeraParcely</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="id4">
<img alt="../_images/sql5.png" class="large" src="../_images/sql5.png" />
<figcaption>
<p><span class="caption-number">Obr. 19 </span><span class="caption-text">Dotaz na parcely typu Vodní tok se záznamem v roce 2021 z RÚIAN v QGIS
seřazené dle výměry.</span><a class="headerlink" href="#id4" title="Permalink k tomuto obrázku">¶</a></p>
</figcaption>
</figure>
<p>Výrazy můžeme zapisovat na různá místa v dotazu a můžeme používat i celou
řadu funkcí. Jako příklad uvedeme jeden výraz a funkci <span class="sqlcmd">MAX</span>, která nám vypíše
maximální výměru v území v hektarech.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">VymeraParcely</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10000</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">parcely</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="id5">
<img alt="../_images/sql7.png" class="large" src="../_images/sql7.png" />
<figcaption>
<p><span class="caption-number">Obr. 20 </span><span class="caption-text">Maximální výměra v hektarech</span><a class="headerlink" href="#id5" title="Permalink k tomuto obrázku">¶</a></p>
</figcaption>
</figure>
</section>
<section id="funkce-souctu-a-agregace">
<h2>Funkce součtu a agregace<a class="headerlink" href="#funkce-souctu-a-agregace" title="Permalink to this heading">¶</a></h2>
<p>Častou operací je agregace dat. V našem příkladu můžeme pomocí agregace
např. získat celkovou plochu všech pozemků daného typu.</p>
<p>Funkce pro součet se označuje <span class="sqlcmd">SUM</span>. Klíčové slovo pro agregaci
se označuje <span class="sqlcmd">GROUP BY</span>.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">DruhPozemkuKod</span><span class="p">,</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">VymeraParcely</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10000</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">parcely</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">DruhPozemkuKod</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="id6">
<img alt="../_images/sql8.png" class="large" src="../_images/sql8.png" />
<figcaption>
<p><span class="caption-number">Obr. 21 </span><span class="caption-text">Suma výměr v hektarech dle druhů pozemku</span><a class="headerlink" href="#id6" title="Permalink k tomuto obrázku">¶</a></p>
</figcaption>
</figure>
<p>Na obrázku vidíme že např. Pole (druh č. 2) má v Dolní Lhotě celkem 221 hektarů.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Úvod do prostorových databází</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Jazyk SQL</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="uvod.html">Úvod do SQL</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Atributy v SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="join.html">Vazby v SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="view.html">Pohledy v SQL</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../spatial/index.html">Prostorové dotazy</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Vyhledávání</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="OK" />
            </form>
          </div>

        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="uvod.html" title="Úvod do SQL"
              >předchozí</a> |
            <a href="join.html" title="Vazby v SQL"
              >další</a> |
            <a href="../genindex.html" title="Obecný rejstřík"
              >rejstřík</a>
          </div>
          <div role="note" aria-label="source link">
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2023 GISMentors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>